<?xml version="1.0" encoding="UTF-8"?>
<table xmlns="http://query.yahooapis.com/v1/schema/table.xsd" https="true">
  <meta>
    <author>Carlo Zottmann</author>
    <description>Proxy SimpleNote POST requests</description>
    <sampleQuery><![CDATA[
      select * from {table} where
      path='/login'
      and postdata="[base64-encoded request parameters]"
    ]]></sampleQuery>
    <documentationURL></documentationURL>
  </meta>
  <bindings>
    <select itemPath="" produces="CSV">
    <urls>
      <url>{url}</url>
    </urls>
    <inputs>
      <key id="path" type="xs:string" required="true" paramType="variable"/>
      <key id="postdata" type="xs:string" required="true" paramType="variable"/>
    </inputs>
    <execute>
      <![CDATA[
        // whole table derived from http://www.wait-till-i.com/2009/11/16/using-yql-to-read-html-from-a-document-that-requires-post-data/
        var myRequest = y.rest( "https://simple-note.appspot.com/api" + path );
        var data = myRequest.accept( "text/plain" ).
        contentType( "application/x-www-form-urlencoded" ).
        post( y.crypto.encodeBase64( postdata ) ).response;
        response.object = data;
      ]]>
    </execute>
    </select>
  </bindings>
</table>